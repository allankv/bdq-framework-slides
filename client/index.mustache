<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>BDQ Conceptual Framework</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<style type="text/css">
			strong {
				color:#e7ad52;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-menu-title="Title">
					<h2>Introducing a<br>Conceptual Framework on<br>Biodiversity Data Quality (DQ)</h2>
					<h4>TDWG/GBIF Biodiversity Data Quality</h4>
					<p>
						<small>Created by <a href="allan.kv@gmail.com">Allan Koch Veiga</a></small>
						<small>and <a href="saraiva@usp.br">Antonio Mauro Saraiva</a></small>
					</p>
				</section>
				<!-- MAIN TARGET -->
				<section data-menu-title="Main target">
					<h2>Main Targets:</h2>
					<br>
					<h4><a href="#/2" class="navigate-foward">ASSESSMENT</a> of fitness for use of biodiversity data.
					</h4>
					<blockquote>
						Enable data users judge the <strong>status of quality</strong> of data and if it is fit for use in a specific context.
					</blockquote>		
					<br>
					<h4><a href="#/3" class="navigate-foward">MANAGEMENT</a> of fitness for use of biodiversity data.</h4>
					<blockquote>
						Enable data custodians and publishers improve the <strong>status of quality</strong> of data using quality control and quality assurance approaches.
					</blockquote>
				</section>
				<!-- ASSESSMENT AND MANAGEMENT -->
				<section>
					<section data-menu-title="DQ Assessment">
						<h3>DQ ASSESSMENT</h3>
						<h4>Judge the status of quality in a use case context</h4>						
						<img src="img/assessment_1.png">						
						<p><i>Are these data fit for use in a <strong>National Species Checklist</strong> context?</i></p>					
					</section>
					<section data-menu-title="Example">
						<h3>DQ ASSESSMENT</h3>
						<h4>Judge the status of quality in a use case context</h4>						
						<img src="img/assessment_2.png">					
						<p><i>Are these data fit for use in a <strong>Niche Modeling</strong> context?</i></p>
					</section>
				</section>
				<section >
					<section data-menu-title="DQ Management - DQ Control">
						<h3>DQ MANAGEMENT</h3>
						<h4>Improve the status of quality</h4>						
						<img src="img/control.png">					
						<p>DQ Control Approach</p>
					</section>
					<section data-menu-title="DQ Assurance">
						<h3>DQ Assessment</h3>
						<h4>Improve the status of quality</h4>						
						<img src="img/assurance.png">											
						<p>DQ Assurance Approach</p>
					</section>
				</section>

				<!-- MAIN COMPONENTS -->
				<section>
					<section data-menu-title="Framework components">
						<h2>FRAMEWORK COMPONENTS:</h2>					
						<h3>1. DQ NEEDS</h3>					
						<p>
							Define the <strong>meaning of DQ in a given context</strong> according to data users perspectives.
						</p>	
						<h3>2. DQ SOLUTIONS</h3>
						<p>
							Define the methods and mechanisms to <strong>meet DQ Needs</strong>.
						</p>	
						<h3>3. DQ REPORTS</h4>
						<p>
							Define the <strong>status of quality of a data resource</strong> according to a given DQ Needs.
						</p>	
					</section>
					<section data-menu-title="The Framework in Biodiversity Informatics Context">
						<img style="width: 100%" src="img/scenario.png">
					</section>
				</section>

				<!-- DQ NEEDS -->				
				<section data-menu-title="DQ Needs components">
					<h3>1. DQ NEEDS COMPONENTS:</h3>											
					<p>
						<strong>1. USE CASE:</strong><br> A data use <b>CONTEXT</b>.
					</p>	
					<p>
						<strong>2. VALUABLE INFORMATION ELEMENTS:</strong><br> A set of <b>INFORMATION</b> valuable in the Use Case context.
					</p>
					<p>
						<strong>3. DQ MEASUREMENT POLICY:</strong><br> A set of DQ Dimenions to <b>MEASURE THE STATUS OF QUALITY</b> in the Use Case context.
					</p>
					<p>
						<strong>4. DQ VALIDATION POLICY:</strong><br> A set of DQ Criteria to <b>VALIDATE IF THE STATUS OF QUALITY IS SUITABLE</b> in the Use Case context.
					</p>
					<p>
						<strong>5. DQ IMPROVEMENT POLICY:</strong><br> A set of DQ Enhancements to <b>IMPROVE THE STATUS OF QUALITY</b> in the Use Case context.
					</p>						
				</section>	
				<!-- DQ SOLUTIONS -->				
				<section data-menu-title="DQ Solutions components">
					<h3>2. DQ SOLUTIONS COMPONENTS:</h3>											
					<p>
						<strong>1. DQ MEASUREMENT METHOD:</strong><br> A manner of procedure, especially an orderly, logical, or systematic way of instruction for <b>DQ MEASUREMENT</b>.
					</p>	
					<p>
						<strong>2. DQ VALIDATION METHOD:</strong><br> A manner of procedure, especially an orderly, logical, or systematic way of instruction for <b>DQ VALIDATION</b>.
					</p>
					<p>
						<strong>3. DQ IMPROVEMENT METHOD:</strong><br> A manner of procedure, especially an orderly, logical, or systematic way of instruction for <b>DQ IMPROVEMENT</b>.
					</p>
					<p>
						<strong>4. MECHANISMS:</strong><br> An actor (software, hardware or person) that <b>IMPLEMENTS AND EXECUTES</b> DQ methods.
					</p>					
				</section>					
				<!-- DQ REPORT -->				
				<section data-menu-title="DQ Reports components">
					<h3>3. DQ REPORTS COMPONENTS:</h3>											
					<p>
						<strong>1. DATA RESOURCE:</strong><br> A <b>SINGLE RECORD</b> or <b>DATASET</b>.
					</p>	
					<p>
						<strong>2. DQ MEASURES:</strong><br> A set of <b>DQ MEASURES</b> assigned to a Data Resource.
					</p>
					<p>
						<strong>3. DQ VALIDATIONS:</strong><br> A set of <b>DQ VALIDATIONS</b> assigned to a Data Resource.
					</p>
					<p>
						<strong>4. DQ IMPROVEMENTS:</strong><br> A set of <b>DQ IMPROVEMENTS</b> assigned to a Data Resource.
					</p>					
				</section>	
				<!-- NEEDS - SOLUTIONS - REPORT -->				
				<section data-menu-title="Needs | Solutions | Reports">
					<img style="margin:0px" src="/img/profile_report.png">				
				</section>	
				<!-- DQ PROFILE -->
				<section data-menu-title="DQ PROFILE">
					<h1>How to define a DQ Profile?</h1>
				</section>	
				<section data-menu-title="1. Use Case">
					<h3>1. Select a Use Case</h3>
					<p>
						Use cases: 
						<select id="selected_use_case" style="height: 30px">						  
						  <option value=""></option>					  
						</select>
					</p>
					<blockquote id="selected_use_case_description">						
					</blockquote>
				</section>	
				<section data-menu-title="2. Valuable Information Elements">
					<h3>2. Select a set of valuable Information Elements (IE)</h3>
					<p>
						IE: 
						<select id="selected_ie" style="height: 30px">						  
						  <option value=""></option>					  
						</select>
						<button id="ie_add">Select</button>
					</p>
					<blockquote id="selected_ie_description">						
					</blockquote>
					<div id="itens_ie">					  
					</div>
				</section>	
				<section id="dimension_content">
				 	<h2>3. Select a set of DQ Dimensions</h2>
				</section>				
				<section id="criterion_content">					
					<h2>4. Select a set of DQ Criteria</h2>
				</section>
				<section id="enhancement_content">					
					<h2>5. Select a set of DQ Enhancements</h2>
				</section>
				<!-- <section data-menu-title="4. Contextualized Criteria">
					<h3>4. Select a set of Contextualized Criteria</h3>
					<div id="criterion_content"></div>
				</section>
				<section data-menu-title="5. Contextualized Enhancements">
					<h3>5. Select a set of Contextualized Enhancements</h3>
					<div id="enhancement_content"></div>
				</section>	 -->

			</div>
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/jquery-3.1.1.min.js"></script>
		
		<script src="js/reveal.js"></script>
		<script>
			var ConceptualFramework = function() {
				this.contextulized = {};
				this.selected = {};
				this.available = {};
				this.profile = {};				
			}
			ConceptualFramework.prototype.setup = function(concept,selectorId,selectorIdDescription, addButton,itens) {							
				var self = this;
				self.selected[concept] = self.selected[concept]?self.selected[concept]:{};
				self.selected[concept].selectorId = selectorId;
				self.selected[concept].selectorIdDescription = selectorIdDescription;				
				$("#"+self.selected[concept].selectorId).change(function() {
					$("#"+selectorIdDescription).html(self.available[concept][$("#"+self.selected[concept].selectorId).val()].description);
					if(!addButton){
						self.profile[concept] = self.available[concept][$("#"+self.selected[concept].selectorId).val()];
					}
				});
				if(addButton){
					$("#"+addButton).click(function() {
						self.profile[concept] = self.profile[concept]?self.profile[concept]:{};
						if(!self.profile[concept][$("#"+self.selected[concept].selectorId).val()]){							
							self.profile[concept][$("#"+self.selected[concept].selectorId).val()] = self.available[concept][$("#"+self.selected[concept].selectorId).val()];
							$("#"+itens).append('<span><small><strong>'+self.available[concept][$("#"+self.selected[concept].selectorId).val()].value+'</strong>: '+self.available[concept][$("#"+self.selected[concept].selectorId).val()].description+'</small></span><br>');
							self.updateContextualizedDimension();
							Reveal.right();
							Reveal.left();
						}						
					});
				}			
			}	
			ConceptualFramework.prototype.updateContextualizedDimension = function() {
				var self = this;				
				var key = "dimension";
				$("#"+self.contextulized[key].selectorId).html('');
				Object.keys(self.profile.ie).forEach(function(keyIE) {
					var content = $(`<section>
									<h3>3. Define a set of important `+self.contextulized[key].title+` for <strong>`+self.profile.ie[keyIE].value+`</strong></h3>	
									<div id="content_`+key+`_`+keyIE+`"></div>
									<div id="`+key+`_`+keyIE+`_list">
									</div>
									</section>`);
					var dimensionsContent = $('<select id="available_'+key+'_'+keyIE+'"></select>');
					Object.keys(self.available.dimension).forEach(function(id) {
						dimensionsContent.append('<option value="'+id+'">'+self.available.dimension[id].value+'</option>');	
					});
					var resourceTypeContent = $('<select id="avaiable_resource_type_'+keyIE+'"></select>');
					Object.keys(self.available.resourceType).forEach(function(id) {
						resourceTypeContent.append('<option value="'+id+'">'+self.available.resourceType[id].value+'</option>');	
					});
					var define = $('<button>Define</button>');
					define.click(function() {
						self.profile.measurement = self.profile.measurement?self.profile.measurement:{};
						var dimensionId = $('#available_'+key+'_'+keyIE).val();
						var dimension = self.available.dimension[dimensionId].value;
						var ie = self.profile.ie[keyIE].value;
						var drId = $('#avaiable_resource_type_'+keyIE).val();							
						var dr = self.available.resourceType[drId].value;		
						var contextulizedId = keyIE+"-"+drId+"-"+dimensionId;

						if(!self.profile.measurement[contextulizedId]){							
							content.find("#"+key+"_"+keyIE+"_list").append('<span><small><strong>'+dimension+'</strong> of '+ie+' of '+dr+': <input id="definition_'+contextulizedId+'" type="text" placeholder="Definition"></input></small></span><br>');

							self.profile.measurement[contextulizedId] = self.profile.measurement[contextulizedId]?self.profile.measurement[contextulizedId]:{};
							self.profile.measurement[contextulizedId].dimension = self.available.dimension[dimensionId];
							self.profile.measurement[contextulizedId].ie = self.available.ie[keyIE];
							self.profile.measurement[contextulizedId].resourceType = self.available.resourceType[drId];
							self.profile.measurement[contextulizedId].definition = $('#definition_'+contextulizedId).val();
							
							content.find('#definition_'+contextulizedId).change(function() {															
								self.profile.measurement[contextulizedId].definition = $('#definition_'+contextulizedId).val();
								self.updateContextualizedCriterion();
							});
							self.updateContextualizedCriterion();
							Reveal.right();
							Reveal.left();
						}						
					});
					content.find("#content_"+key+"_"+keyIE).append(self.contextulized[key].title+': ').append(dimensionsContent).append("<br>").append("Resource Type: ").append(resourceTypeContent).append("<br>").append(define);
					$("#"+self.contextulized[key].selectorId).append(content);						
				});					
			}
			ConceptualFramework.prototype.updateContextualizedCriterion = function() {
				var self = this;
				var key = "criterion";
				$("#"+self.contextulized[key].selectorId).html('');
				Object.keys(self.profile.ie).forEach(function(keyIE) {					
					var content = $(`<section>
									<h3>3. Define a set of important `+self.contextulized[key].title+` for <strong>`+self.profile.ie[keyIE].value+`</strong></h3>	
									<div id="content_`+key+`_`+keyIE+`"></div>
									
									</ul>
									</section>`);
					// var criteriaContent = $('<select id="available_'+key+'_'+keyIE+'"></select>');
					Object.keys(self.profile.measurement).forEach(function(id) {
						// console.log("LOG: ",id);
						// console.log("self.profile.measurement[id]: ",self.profile.measurement[id]);
						if(self.profile.measurement[id].ie.id == keyIE){
							content.find('#content_'+key+'_'+keyIE).append('<span id="'+id+'"><small>The measure for <strong>'+
								self.profile.measurement[id].dimension.value+' of '+
								self.profile.measurement[id].ie.value+' of '+
								self.profile.measurement[id].resourceType.value+'</strong> must be: <input type="text" placeholder="Acceptable value"></input></small></span><br>');	
						}						
					});

					// var resourceTypeContent = $('<select id="avaiable_resource_type_'+keyIE+'"></select>');
					// Object.keys(self.available.resourceType).forEach(function(id) {
					// 	resourceTypeContent.append('<option value="'+id+'">'+self.available.resourceType[id].value+'</option>');	
					// });
					// var define = $('<button>Define</button>');
					// define.click(function() {
					// 	var dimensionId = $('#available_'+key+'_'+keyIE).val();
					// 	var dimension = self.available.dimension[dimensionId].value;
					// 	var ie = self.profile.ie[keyIE].value;
					// 	var drId = $('#avaiable_resource_type_'+keyIE).val();							
					// 	var dr = self.available.resourceType[drId].value;		
					// 	var contextulizedId = keyIE+"-"+drId+"-"+dimensionId;				
					// 	content.find("#"+key+"_"+keyIE+"_list").append('<li>'+dimension+' of '+ie+' of '+dr+': <input id="definition_'+contextulizedId+'" type="text"></input></li>');
					// 	self.profile.measurement = self.profile.measurement?self.profile.measurement:{};							
					// 	self.profile.measurement[contextulizedId] = self.profile.measurement[contextulizedId]?self.profile.measurement[contextulizedId]:{};
					// 	self.profile.measurement[contextulizedId].definition = '';
					// 	content.find('#definition_'+contextulizedId).change(function() {								
					// 		self.profile.measurement[contextulizedId].definition = $('#definition_'+contextulizedId).val();
					// 		console.log("LOG: ",self.profile.measurement[contextulizedId].definition);
					// 	});
					// });
					// content.find("#content_"+key+"_"+keyIE).append(self.contextulized[key].title+': ').append(criteriaContent).append("<br>").append("Resource Type: ").append(resourceTypeContent).append("<br>").append(define);
					$("#"+self.contextulized[key].selectorId).append(content);						
				});					
			}
			ConceptualFramework.prototype.setupContextualized = function(concept,selectorId,title) {									
				var self = this;
				self.contextulized[concept] = self.contextulized[concept]?self.contextulized[concept]:{};
				self.contextulized[concept].selectorId = selectorId;				
				self.contextulized[concept].title = title;				
			}			
			ConceptualFramework.prototype.addAvailableConcept = function(concept,id, value, description) {
				var	self = this;
				self.available[concept] = self.available[concept]?self.available[concept]:{};				
				self.available[concept][id] = {id:id, value:value,description:description};										
			}			
			ConceptualFramework.prototype.printAvailableConcept = function(concept) {
				var	self = this;
				Object.keys(self.available[concept]).forEach(function(key) {
					$("#"+self.selected[concept].selectorId).append('<option value="'+key+'">'+self.available[concept][key].value+'</option>');	
				});				
			}						
			var framework = new ConceptualFramework();			
			framework.addAvailableConcept("resourceType","dataset","Dataset", "Dataset or subset");
			framework.addAvailableConcept("resourceType","record","Single Record", "Single record");
			

			framework.setup("useCase","selected_use_case","selected_use_case_description");						
			framework.addAvailableConcept("useCase","sdm","Species Distribution Modelling", "Species distribution modeling uses, encopassing niche modeling and ...");
			framework.addAvailableConcept("useCase","sc","Brazillian National Checklist of Species", "Official species checklist of Brazil");
			framework.printAvailableConcept("useCase");

			framework.setup("ie","selected_ie","selected_ie_description","ie_add","itens_ie");
			framework.addAvailableConcept("ie","coord","Coordinates","Latitude, Longitude, Geodetic Datum and Coordinates Uncertainty in Meters");
			framework.addAvailableConcept("ie","sciName","Scientific Name", "Complete scientific name");
			framework.addAvailableConcept("ie","date","Event Date", "Date and time whether event occur");
			framework.addAvailableConcept("ie","country","Country", "Country name and country code where the event occur");
			framework.printAvailableConcept("ie");

			framework.addAvailableConcept("dimension","completeness","Completeness", "Completnes is....");
			framework.addAvailableConcept("dimension","granularity","Granularity", "This dimension is....");
			framework.addAvailableConcept("dimension","consistency","Consistency", "This dimension is....");
			framework.addAvailableConcept("dimension","conformance","Conformance", "This dimension is....");

			framework.setupContextualized("dimension","dimension_content","DQ Dimensions");
			framework.setupContextualized("criterion","criterion_content", "DQ Criteria");
			framework.setupContextualized("enhancement","enhancement_content", "DQ Enhancements");



			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				menu: {
			        // Specifies which side of the presentation the menu will 
			        // be shown. Use 'left' or 'right'.
			        side: 'left',

			        // Add slide numbers to the titles in the slide list.
			        // Use 'true' or format string (same as reveal.js slide numbers)
			        numbers: false,

			        // Specifies which slide elements will be used for generating
			        // the slide titles in the menu. The default selects the first
			        // heading element found in the slide, but you can specify any
			        // valid css selector and the text from the first matching
			        // element will be used.
			        // Note: that a section data-menu-title attribute or an element
			        // with a menu-title class will take precedence over this option
			        titleSelector: 'h1, h2, h3, h4, h5, h6',

			        // Hide slides from the menu that do not have a title.
			        // Set to 'true' to only list slides with titles.
			        hideMissingTitles: false,

			        // Add markers to the slide titles to indicate the 
			        // progress through the presentation
			        markers: true,

			        // Specify custom panels to be included in the menu, by
			        // providing an array of objects with 'title', 'icon'
			        // properties, and either a 'src' or 'content' property.
			        custom: false,
			        themes: false,

			        // Specifies the themes that will be available in the themes
			        // menu panel. Set to 'false' to hide themes panel.
			        // themes: [
			        //     { name: 'Black', theme: 'css/theme/black.css' },
			        //     { name: 'White', theme: 'css/theme/white.css' },
			        //     { name: 'League', theme: 'css/theme/league.css' },
			        //     { name: 'Sky', theme: 'css/theme/sky.css' },
			        //     { name: 'Beige', theme: 'css/theme/beige.css' },
			        //     { name: 'Simple', theme: 'css/theme/simple.css' },
			        //     { name: 'Serif', theme: 'css/theme/serif.css' },
			        //     { name: 'Blood', theme: 'css/theme/blood.css' },
			        //     { name: 'Night', theme: 'css/theme/night.css' },
			        //     { name: 'Moon', theme: 'css/theme/moon.css' },
			        //     { name: 'Solarized', theme: 'css/theme/solarized.css' }
			        // ],

			        // Specifies if the transitions menu panel will be shown.
			        transitions: false,

			        // Adds a menu button to the slides to open the menu panel.
			        // Set to 'false' to hide the button.
			        openButton: true,

			        // If 'true' allows the slide number in the presentation to
			        // open the menu panel. The reveal.js slideNumber option must 
			        // be displayed for this to take effect
			        openSlideNumber: true,

			        // If true allows the user to open and navigate the menu using
			        // the keyboard. Standard keyboard interaction with reveal
			        // will be disabled while the menu is open.
			        keyboard: false
			    },

				history: true,
				audioPrefix: 'audio/',        // audio files are stored in the "audio" folder
			    audioSuffix: '.wav',          // audio files have the ".ogg" ending
			    audioDefaultDuration: 5, // default duration if no audio is available
			    audioPlayerOpacity: 0.05,     // opacity value of audio player if unfocused				
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/audio-slideshow/slideshow-recorder.js', condition: function( ) { return !!document.body.classList; } },              
    			    { src: 'plugin/audio-slideshow/audio-slideshow.js', condition: function( ) { return !!document.body.classList; } },
    			    { src: 'plugin/menu/menu.js' }
				],
			    keyboard: { 
			        82: function() { Recorder.toggleRecording(); }, // press 'r' to start/stop recording
			        90: function() { Recorder.downloadZip(); },  // press 'z' to download zip containing audio files
			        77: null

			    }
			});
		</script>
	</body>
</html>
